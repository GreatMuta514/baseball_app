<%= form_with(model: user) do |form| %>
  <%= render 'shared/error_message', object: user %>

  <%= image_tag user.profile.url, id: 'profile_preview', class: 'rounded-circle mb-3 profile-image d-block mx-auto', style: 'width:150px; height:150px; border-radius:50%; object-fit: cover;' %>
  <div class="field">
    <%= form.label :profile, class: 'form-label' %>
    <%= form.file_field :profile, id: 'profile', class: 'form-control' %>
    <%= form.hidden_field :profile_cache %>
  </div>

  <div class="field">
    <%= form.label :nickname, class: 'form-label' %>
    <%= form.text_field :nickname, class: 'form-control' %>
  </div>

  <div class="field">
    <%= form.label :email, class: 'form-label' %>
    <%= form.text_field :email, class: 'form-control' %>
  </div>

  <% unless current_user %>
  <div class="field">
    <%= form.label :password, class: 'form-label' %><br />
    <%= form.password_field :password, class: 'form-control' %>
  </div>
  
  <div class="field">
    <%= form.label :password_confirmation, class: 'form-label' %><br />
    <%= form.password_field :password_confirmation, class: 'form-control' %>
  </div>
  <% end %>

  <div class="actions my-3">
    <%= form.submit class: 'btn btn-primary d-block mx-auto' %>
  </div>
<% end %>
